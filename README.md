# نظام إدارة علاقات العملاء - CRM System

نظام CRM متكامل مبني بـ Django لإدارة التصاريح، الصيانة، الشكاوى، التسويق، الموارد البشرية، والمالية.

---

## المميزات - Features

- نظام مستخدمين متقدم مع صلاحيات مخصصة
- 6 مديولات رئيسية (التصاريح، الصيانة، الشكاوى، التسويق، HR، المالية)
- دعم كامل للعربية والإنجليزية
- نظام إشعارات متقدم
- نظام موافقات متعدد المستويات

---

## التثبيت - Installation

### 1. استنساخ المشروع
```bash
git clone https://github.com/ba3tezr/crm-.git
cd crm-
```

### 2. إنشاء بيئة افتراضية
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
```

### 3. تثبيت المكتبات
```bash
pip install -r requirements.txt
```

### 4. إعداد ملف البيئة
```bash
cp .env.example .env
```

### 5. تشغيل السيرفر
```bash
python manage.py runserver 0.0.0.0:8000
```

**ملاحظة:** قاعدة البيانات مرفقة مع المشروع وتحتوي على بيانات تجريبية جاهزة!

### 6. بيانات الدخول الافتراضية

**Admin:**
- Username: `admin`
- Password: `admin123`

**Staff:**
- Username: `staff`
- Password: `staff123`

**Tenant (مستأجر):**
- Username: `tenant`
- Password: `tenant123`

---

## التحديثات الأخيرة - Latest Updates

### ✅ قالب فاتورة احترافي (Professional Invoice Template)
- قالب فاتورة احترافي بحجم A4
- طباعة الفاتورة فقط (بدون واجهة التطبيق)
- تصميم متجاوب مع تحجيم تلقائي
- دعم الشعار والألوان المخصصة
- إعدادات الفاتورة من لوحة التحكم:
  * معلومات الشركة (الاسم، الشعار، العنوان)
  * معلومات ضريبية (الرقم الضريبي، السجل التجاري)
  * ألوان القالب (أساسي، ثانوي)
  * نص التذييل والشروط والأحكام
- مهما كان حجم الفاتورة تتسع في صفحة A4 واحدة

### ✅ تحسينات داشبورد المستأجر (Tenant Dashboard)
- إخفاء الرئيسية للمستأجرين
- إظهار داشبورد المستأجر كصفحة رئيسية
- إصلاح عداد الفواتير غير المدفوعة
- توجيه تلقائي للمستأجرين إلى داشبوردهم

### ✅ إصلاح نظام الدفعات (Payment System Fix)
- تحديث تلقائي لحالة الفاتورة عند إضافة دفعة
- حساب المبلغ المدفوع والمتبقي تلقائياً
- تحديث الحالة إلى: مدفوعة / مدفوعة جزئياً / قيد الانتظار

### ✅ صلاحيات المستأجرين (Tenant Permissions)
- السماح للمستأجرين بإنشاء طلبات صيانة
- السماح للمستأجرين بتقديم شكاوى
- عرض الفعاليات للمستأجرين (قراءة فقط)
- إضافة زر الفعاليات في لوحة المستأجر

### ✅ إكمال الترجمات (Complete Translations)
- ترجمة كاملة لصفحات المستأجرين
- ترجمة صفحة الملف الشخصي
- ترجمة صفحة الفواتير وتفاصيلها
- ترجمة إعدادات الفاتورة
- دعم كامل للعربية والإنجليزية

---

## نظام الصلاحيات

1. افتح: `http://127.0.0.1:8000/admin/`
2. اذهب إلى **المستخدمون**
3. اختر المستخدم
4. أضف صلاحيات الأقسام

---

## إعدادات الفاتورة

1. افتح: `http://127.0.0.1:8000/admin/`
2. اذهب إلى **Finance** → **إعدادات الفاتورة**
3. قم بتعديل:
   - معلومات الشركة (الاسم، الشعار، العنوان)
   - معلومات الاتصال (الهاتف، البريد، الموقع)
   - معلومات ضريبية (الرقم الضريبي، السجل التجاري)
   - ألوان القالب (أساسي، ثانوي)
   - نص التذييل والشروط والأحكام
4. احفظ التغييرات
5. اطبع أي فاتورة لرؤية التغييرات

**ملاحظة:** يمكن رفع شعار الشركة من نفس الصفحة (يفضل 200x80 بكسل)

---

## التقنيات

- Django 5.0.14
- Bootstrap 5.3
- HTMX
- Font Awesome 6

---

**v1.0.0** - 2025-10-26
